---
title: "8.2 積と余積と双関手"
---

双関手の例として重要なのが，圏の積である．2つの対象の間の積が[普遍的構成](https://zenn.dev/taketo1024/books/850b20937af93b/viewer/5-0)により定義されているような圏の積である．任意の対象のペアについて積が存在するなら，その対象のペアから積へのマッピングは双関手的である．これは一般的に成り立ち， Haskell で表現できる．最もシンプルな積の型を `Bifunctor` インスタンスとして書いたものを次に示す．ペアコンストラクタだ．

```haskell
instance Bifunctor (,) where
  bimap f g (x, y) = (f x, g y)
```

この `bimap` はひとつめの関数をひとつめの要素に適用し，ふたつめの要素をふたつめの要素に適用する．実のところ他の選択肢はほとんどない．そしてこのコードから芋づる式に周辺のコードが生み出される^[原文 The code pritty much writes itself.]． `bimap` の型はこうだ．

```haskell
bimap :: (a -> c) -> (b -> d) -> (a, b) -> (c, d)
```

双関手は型のペアを作る働きをしていて，例えばこんな感じだ．

```haskell
(,) a b = (a, b)
```

圏の任意の対象のペアについて余積が定義されていれば，こちらも双対性により双関手であることがいえる． Haskell では，型コンストラクタ `Either` がそれにあたる．これも `Bifunctor` のインスタンスである．

```haskell
instance Bifunctor either whree
  bimap f _ (Left x) = Left (f x)
  bimap _ g (Right y) = Right (g y)
```

このコードからも芋づる式に周辺のコードが生み出される．

ところで，以前話したモノイド圏を覚えているだろうか？ モノイド圏は二項演算子と単位元によって定義されるのだった．以前の議論では「 $\mathbf{Set}$ はカルテジアン積（という二項演算子）と，単集合（という単位元）を持つモノイド圏である」ということだった．だがここまでの議論を踏まえると「 $\mathbf{Set}$ は直和と空集合によるモノイド圏である」という見方もできる．まだ話していなかったが，モノイド圏の演算子は双関手でなければならない．これは，射により定義される圏の構造とモノイド積が共存するための非常に重要な条件である．次は，モノイド圏の完全な定義についてもう一歩踏み込んでいこう．（その前に自然性について学ばなければならないが．）

（和訳：[@takase](https://zenn.dev/takase)）