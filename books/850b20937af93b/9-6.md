---
title: "9.6 カリー・ハワード同型対応"
---

論理学と代数データ型の対応についてはすでに触れた． `Void` 型と unit 型 `()` は false と true に対応するのだった．直積と直和の型は，論理積 $\land$ (AND)と論理和 $\lor$ (OR) に対応する．この場合，関数型は論理包含 $\Rightarrow$ に対応する．つまり `a -> b` という型は「もし a ならば b」と読み替えてもよい．

カリー・ハワード同型対応によれば，すべての型は命題，つまり真か偽となる言明^[原文：statement]ないし判断^[原文：judgement]，と解釈できる．このような命題は，その型が **具体性を持つ** (inhabited)（実際に要素を持つ）なら真で，そうでなければ偽である．特に論理包含はそれに対応する関数型が要素を持つなら真といえる．つまり関数を実装するということは，定理を証明するのとおなじなのだ．いくつか例を見てみよう．

写像対象の所で導入した `eval` 関数について考えてみる． `eval` のシグネチャはこうだ．

```haskell
eval :: ((a -> b), a) -> b
```

関数とその引数を取り，適切な型の値を返す，というシグネチャだ．個の射を Haskell で実装するとこうなる．

$$ eval :: (a \Rightarrow b) \times a \rightarrow b $$

これは関数の型が $a \Rightarrow b$ （または指数対象 $b^a$）であるということも併せて定義している．このシグネチャを，カリー・ハワード同型対応を使って述語論理に変換しよう．

$$ ((a \Rightarrow b) \land a) \Rightarrow b $$

これは，「もし $a$ ならば $b$ が真で，かつ $a$ が真ならば， $b$ は真でなければならない」と読む．これはとても直観的であり，昔から「モーダスポネンス^[modus ponens]」として知られている．この定理は，関数を実装することにより証明できる．

```haskell
eval :: ((a -> b), a) -> b
eval (f, x) = f x
```

`a` を取り `b` を返す関数 `f` と，型 `a` の具体的な値 `x` が与えられれば，型 `b` の具体的な値を得ることができて，その値は関数 `f` に `x` を適用したものである，という実装だ．この `eval` の実装により，型 `((a -> b), a) -> b` が具体性を持つことを示せた．つまり我々の論理ではモーダスポネンスは真であるということになる．

明らかに偽な述語の例についても見ておこう．たとえば「$a$ または $b$ が真ならば $a$ は真である」というものだ．

$$ a \lor b \Rightarrow a $$

これは明らかに誤りで，$a$ が偽で $b$ が真の場合が反例である．

カリー・ハワード同型対応を使ってこの述語を関数シグネチャに変換すると次のようになる．

```haskell
Either a b -> a
```

挑戦してみるとわかるが，この関数は実装できない．もし `Right` の値でこの関数が呼び出されたら，型 `a` の値を生成しようがないのだ．（今は純粋関数について議論していることを思い出してほしい．）

最後の例として， `absurd` 関数の意味について考えてみよう．

```haskell
absurd :: void -> a
```

Void を false に置き換えると次のようになる．

$$ false \rightarrow a $$

矛盾からはあらゆることが導かれる（爆発律^[ex falso quodlibet]）．Haskell によるこの言明の証明（＝関数の実装）の一つの例がこれだ．

```haskell
absurd (Void a) = absurd a
```
ここでの `Void` は次の定義とする．

```haskell
newtype Void = Void Void
```

ただ，この `Void` 型に意味があるかというと，これも微妙なところだ．この定義から値を組み立てることはできない．何かを組み立てるために何かを渡さねばならず，結局 `absurd` 関数が呼び出されることは永遠に無い．

以上，興味深い例を紹介してきたが，カリー・ハワード同型対応は結局のところ実用的なのだろうか？ おそらく日常的なプログラミングでこれを使うことはないだろう．だが， Agda や Coq といったプログラミング言語では定理の証明にカリー・ハワード同型対応を活用している．

コンピュータは数学者の仕事を助けるだけでなく，数学の最も基礎的な部分に革命をもたらしている．疑問を持つ読者のために，近年最も注目されている研究対象の一つで，型理論から発展した **ホモトピー型理論** (Homotopy Type Theory) を紹介しておこう，この理論では真偽値，整数，積，余積，関数型その他を多用しており， Coq と Agda で定式化されている．コンピュータは現在進行形で世界に革命をもたらしているのだ．

（和訳：[@takase](https://zenn.dev/takase)）